<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<definition>
    <body><![CDATA[<?php

class %BASECLASSNAME% extends dbPeer
{
    protected	$instance		= false;
    
    protected	$tableName		=	'%TABLENAME%';
    protected	$primaryKey		=	%PRIMARYKEY%;
    protected	$primaryTKey	=	%PRIMARYTKEY%;
    protected	$primaryOKey	=	%PRIMARYOKEY%;

	protected	$fields			=	array(%FIELDS%);

    protected	$primaryBind	=	"%PRIMARYBIND%";
    protected	$multiPrimary	=	%MULTIPRIMARY%;

    public static function setKey( $key )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doSetKey( $key );
    }

    /**
     * get full row from table
     *
     * @param integer $primaryKey
     * @return array
     */
    public static function  get( $primaryKey )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doGetItem( $primaryKey );
    }

    /**
     * get full row from table
     *
     * @param integer $primaryKey
     * @return array
     */
    public static function  getItem( $primaryKey )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doGetItem( $primaryKey );
    }


    public static function  getItems( $primaryKeys )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doGetItems( $primaryKeys );
    }

    /**
     * get array of primary keys
     *
     * @param array $where
     * @param array $bind
     * @param array $order
     * @param array $limit
     * @return array
     */
    public static function  getList( $where = array(), $order = array(), $limit = false, $offset = false, &$total = false, &$more = false )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doGetList( $where, $order, $limit, $offset, $total, $more);
    }


    /**
     * get array of primary keys
     *
     * @param array $where
     * @param array $bind
     * @param array $order
     * @param array $limit
     * @return array
     */
    public static function  getSlicedList( $where = array(), $offset = false, $limit = false, &$total = false )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doGetList( $where, false, $limit, $offset, $total );
    }

    /**
     * insert row
     *
     * @param array $data
     * @return integer
     */
    public static function  insert( $data, $multi = false )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doInsert( $data, $multi );
    }


    /**
     * insert row
     *
     * @param array $data
     * @return integer
     */
    public static function  replace( $data )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doReplace( $data );
    }


    /**
     * update row by primary key
     *
     * @param integer $id
     * @param array $data
     * @return boolean
     */
    public static function  update($id,  $data)
    {
        return dbPeer::getInstance('%CLASSNAME%')->doUpdate($id,  $data);
    }

    /**
     * delete row
     *
     * @param integer $primaryKey
     */
    public static function  delete( $primaryKey )
    {
        return dbPeer::getInstance('%CLASSNAME%')->doDelete( $primaryKey );
    }

	static function setMeta($id, $values)
	{
		$item	=	dbPeer::getInstance('%CLASSNAME%')->doGetItem($id);
		$meta	=	$item['meta'];

		foreach ($values as $key => $value)
		{
			$meta[$key]	=	$value;
		}

		dbPeer::getInstance('%CLASSNAME%')->doUpdate($id, array('meta' => json_encode($meta)));
	}

	static function getMeta($id, $key, $item = false)
	{
		if (!$item)
		{
			$item	=	dbPeer::getInstance('%CLASSNAME%')->doGetItem($id);
		}

		$meta	=	json_decode($item['meta'], true);
		return $meta[$key];
	}


}

]]>
    </body>
</definition>
